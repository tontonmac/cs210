import javax.swing.*;
import java.awt.*;

/**
 * @author Bob Wilson
 * @version 1.0, 12/20/2009
 * 
 * Triangle class for fractal pattern generation
 */

public class Triangle
{
  // indices for sub-triangles
  public static final int CORNER_ONE = 0;
  public static final int CORNER_TWO = 1;
  public static final int CORNER_THREE = 2;
  public static final int EDGE_ONE = 3;
  public static final int EDGE_TWO = 4;
  public static final int EDGE_THREE = 5;
  
  // smallest perimeter for triangle to be drawn
  public static final int SMALLEST = 30;
  
  private Corner x;
  private Corner y;
  private Corner z;
  
  public Triangle(Corner x, Corner y, Corner z)
  {
    this.x = x;
    this.y = y;
    this.z = z;
  }
  
  public void draw(Graphics screen)
  {
    screen.drawLine(x.w, x.d, y.w, y.d);
    screen.drawLine(y.w, y.d, z.w, z.d);
    screen.drawLine(z.w, z.d, x.w, x.d);
  }
  
  public int size()
  {
    // write your code here
    int xy = (int) Math.sqrt(Math.pow((x.w - y.w), 2) 
                               + Math.pow((x.d - y.d), 2));
    
    int yz = (int) Math.sqrt(Math.pow((y.w - z.w), 2) 
                               + Math.pow((y.d - z.d), 2));
    
    int xz = (int) Math.sqrt(Math.pow((x.w - z.w), 2) 
                               + Math.pow((x.d - z.d), 2));
    
    return xy + yz+ xz;
  }
  
  public Triangle getNextLevel(int index)
  {
    Triangle t = null;
    // write your code here
    Corner a1 = new Corner(x.w, x.d);
    Corner a2 = new Corner(y.w, y.d);
    Corner a3 = new Corner(z.w, z.d);
    Triangle a = new Triangle(a1, a2, a3);
    
    Corner b1 = a1.mid(a3);
    Corner b2 = a2.mid(a3);
    Corner b3 = a1.mid(a2);
    
    if(index == CORNER_ONE)
    { 
      Corner c1 = a3.mid(a3.mid(a1));
      Corner c2 = c1.mid(a2.mid(a2.mid(a1)));
      Corner c3 = a3.mid(a3.mid(a2));
      t = new Triangle(c1, c2, c3); 
    }
    else
      if(index == CORNER_TWO)
    {
      Corner d1 = a2.mid(a2.mid(a1));
      Corner d2 = a2.mid(a2.mid(a3));
      Corner d3 = d1.mid(d1.mid(a3.mid(a3.mid(a1))));
      t = new Triangle(d1, d2, d3);
    }
    else
      if(index == CORNER_THREE)
    {
      Corner e1 = a1.mid(a1.mid(a3));
      Corner e2 = a1.mid(a1.mid(a2));
      Corner e3 = a1.mid(a2).mid(a1.mid(a3));
      t = new Triangle(e1, e2, e3);
    }
    else
      if(index == EDGE_ONE)
    {
      Corner f1 = a3.mid(a3.mid(a1).mid(a3.mid(a3.mid(a1).mid(a2.mid(a2.mid(a1))))));
      Corner f2 = a2.mid(a2.mid(a1)).mid(a2.mid(a2.mid(a1).mid(a3.mid(a3.mid(a1)))));
      Corner f3 = a3.mid(a2);
      t = new Triangle(f2, f2, f3);
    }
    else
      if(index == EDGE_TWO)
    {
      Corner g1 = a1.mid(a3);
      Corner g2 = a1.mid(g1.mid(a1.mid(a2)));
      Corner g3 = a3.mid(a3.mid(a1)).mid(a3.mid(a3.mid(a1)).mid(a2.mid(a2.mid(a1))));
    }
    else
      if(index == EDGE_THREE)
    {
      Corner h2 = a1.mid(a2);
      Corner h3 = a2.mid(a2.mid(a1)).mid(a2.mid(a2.mid(a1).mid(a3.mid(a3.mid(a1)))));
      Corner h1 = a1.mid(a3).mid(h2);
      t = new Triangle(h1, h2, h3);
    }
    else
      if(index == SMALLEST)
    {
      return t;
    }    
    return t;
    
    
  }
}
